---
import Layout from '../layouts/Layout.astro'
import Nav from '../components/Nav.astro'
import Footer from '../components/Footer.astro'
import Terminal from '../components/Terminal.astro'
import Button from '../components/Button.astro'
import FeatureCard from '../components/FeatureCard.astro'
import CodeBlock from '../components/CodeBlock.astro'
import WaveBackground from '../components/WaveBackground.astro'
import { siteConfig } from '../config'

const terminalLines = [
  { text: '', type: 'output', delay: 600 },
  { text: '<span class="text-buoy">‚öì</span> Scanning for design drift...', type: 'output', delay: 800 },
  { text: '', type: 'output', delay: 1200 },
  { text: 'Found <span class="text-warning">23</span> issues ‚Äî <span class="text-success">18 auto-fixable</span>', type: 'output', delay: 1400 },
  { text: '', type: 'output', delay: 1600 },
  { text: '<span class="text-critical font-semibold">CRITICAL (2)</span>', type: 'output', delay: 1800 },
  { text: '‚îú‚îÄ Button.tsx:12 Missing aria-label <span class="text-success">‚Üí auto-fix</span>', type: 'critical', delay: 2000 },
  { text: '‚îî‚îÄ Modal.tsx:45 Focus trap conflict <span class="text-success">‚Üí auto-fix</span>', type: 'critical', delay: 2200 },
  { text: '', type: 'output', delay: 2400 },
  { text: '<span class="text-warning font-semibold">WARNING (8)</span>', type: 'output', delay: 2600 },
  { text: '‚îú‚îÄ Card.tsx:8 #ffffff <span class="text-success">‚Üí var(--bg-surface)</span>', type: 'warning', delay: 2800 },
  { text: '‚îú‚îÄ Badge.tsx:3 8px <span class="text-success">‚Üí var(--spacing-sm)</span>', type: 'warning', delay: 3000 },
  { text: '‚îî‚îÄ <span class="text-slate-dark">... and 6 more</span>', type: 'muted', delay: 3200 },
  { text: '', type: 'output', delay: 3400 },
  { text: '<span class="text-buoy font-semibold">Run buoy fix --auto to apply 18 fixes</span>', type: 'output', delay: 3600 },
]

const fixTerminalLines = [
  { text: '', type: 'output', delay: 600 },
  { text: '<span class="text-buoy">‚öì</span> Applying 18 auto-fixes...', type: 'output', delay: 800 },
  { text: '', type: 'output', delay: 1200 },
  { text: '<span class="text-success">‚úì</span> Button.tsx: Added aria-label', type: 'success', delay: 1400 },
  { text: '<span class="text-success">‚úì</span> Modal.tsx: Using FocusTrap component', type: 'success', delay: 1600 },
  { text: '<span class="text-success">‚úì</span> Card.tsx: #ffffff ‚Üí var(--bg-surface)', type: 'success', delay: 1800 },
  { text: '<span class="text-success">‚úì</span> Badge.tsx: 8px ‚Üí var(--spacing-sm)', type: 'success', delay: 2000 },
  { text: '<span class="text-slate-dark">... and 14 more files</span>', type: 'muted', delay: 2200 },
  { text: '', type: 'output', delay: 2400 },
  { text: '<span class="text-success font-semibold">18 issues fixed.</span> <span class="text-slate">5 need manual review.</span>', type: 'output', delay: 2600 },
  { text: '', type: 'output', delay: 2800 },
  { text: 'Design system coverage: <span class="text-warning">47%</span> ‚Üí <span class="text-success">72%</span>', type: 'output', delay: 3000 },
]

const features = [
  {
    title: 'Hardcoded Values',
    description: 'Find colors, spacing, and fonts that bypass your design tokens.',
    icon: 'üé®',
    examples: ['#ff0000', '16px', 'Arial'],
    href: '/features/hardcoded-values'
  },
  {
    title: 'Duplicate Components',
    description: 'Detect similar components that should be consolidated.',
    icon: 'üì¶',
    examples: ['Button', 'ButtonNew', 'MyButton'],
    href: '/features/duplicate-detection'
  },
  {
    title: 'Naming Drift',
    description: 'Catch inconsistent naming conventions across your codebase.',
    icon: 'üè∑Ô∏è',
    examples: ['btn vs Button', 'color vs colour'],
    href: '/features/naming-consistency'
  },
  {
    title: 'Prop Mismatches',
    description: 'Find when the same prop has different types across components.',
    icon: 'üîß',
    examples: ['onClick vs onPress', 'size: string | number'],
    href: '/features/prop-consistency'
  },
  {
    title: 'Deprecated Patterns',
    description: 'Track components marked @deprecated still in use.',
    icon: '‚ö†Ô∏è',
    examples: ['@deprecated', 'legacy components'],
    href: '/features/drift-detection'
  },
  {
    title: 'Framework Sprawl',
    description: 'Detect multiple UI frameworks competing in your codebase.',
    icon: 'üåê',
    examples: ['React + Vue + ...'],
    href: '/features/framework-sprawl'
  },
]

const integrations = [
  { name: 'React', icon: '‚öõÔ∏è' },
  { name: 'Vue', icon: 'üíö' },
  { name: 'Svelte', icon: 'üî∂' },
  { name: 'Angular', icon: 'üî∫' },
  { name: 'Next.js', icon: '‚ñ≤' },
  { name: 'Figma', icon: 'üé®' },
  { name: 'Storybook', icon: 'üìñ' },
  { name: 'Tailwind', icon: 'üåä' },
  { name: 'GitHub', icon: 'üêô' },
]

const steps = [
  {
    step: '1',
    title: 'Find',
    command: 'buoy drift check',
    description: 'Finds every issue with exact file and line'
  },
  {
    step: '2',
    title: 'Fix',
    command: 'buoy fix --auto',
    description: 'Auto-applies safe fixes in seconds'
  },
  {
    step: '3',
    title: 'Measure',
    command: 'buoy status',
    description: 'Shows coverage improvement'
  },
]
---

<Layout title="Buoy - Design Drift Detection for the AI Era">
  <Nav />

  <!-- Hero Section -->
  <section class="relative min-h-screen flex items-center justify-center overflow-hidden">
    <!-- Digital wave background -->
    <WaveBackground />

    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-16">
      <div class="text-center max-w-4xl mx-auto">
        <!-- Tagline badge -->
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-navy/60 border border-navy-light/30 mb-8 backdrop-blur-sm">
          <span class="w-2 h-2 rounded-full bg-buoy animate-pulse"></span>
          <span class="text-sm text-slate">The Code Control layer that design has been missing</span>
        </div>

        <!-- Main headline -->
        <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold mb-6 leading-tight">
          <span class="text-light">Catch design drift</span>
          <br />
          <span class="text-gradient-sunrise">before it ships.</span>
        </h1>

        <!-- Subheadline -->
        <p class="text-lg sm:text-xl text-slate max-w-2xl mx-auto mb-10">
          AI writes code that works but ignores your design system.
          Buoy finds hardcoded colors, duplicate components, and token violations.
        </p>

        <!-- CTAs -->
        <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-12">
          <Button href={siteConfig.githubUrl} size="lg" external>
            Try it now ‚Äî it's free
          </Button>
          <Button href={siteConfig.githubUrl} variant="secondary" size="lg" external>
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"/>
            </svg>
            View on GitHub
          </Button>
        </div>

        <!-- Quick install command -->
        <div class="inline-flex items-center gap-3 px-4 py-3 bg-navy/80 border border-navy-light/30 rounded-lg font-mono text-sm backdrop-blur-sm copy-command" data-command="npx buoy-design scan">
          <span class="text-slate">$</span>
          <code class="text-light">npx buoy-design scan</code>
          <button class="copy-btn text-slate hover:text-buoy transition-colors" aria-label="Copy command">
            <svg class="copy-icon w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
            </svg>
            <svg class="check-icon w-4 h-4 hidden text-success" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce">
      <svg class="w-6 h-6 text-slate" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
      </svg>
    </div>
  </section>

  <!-- Problem Statement Section -->
  <section class="py-24 bg-navy-dark relative">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl sm:text-4xl font-bold text-light mb-4">
          The code works. But it's not your code.
        </h2>
        <p class="text-lg text-slate max-w-2xl mx-auto">
          AI assistants generate functional code that ignores your design system entirely.
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        <!-- What AI generates -->
        <div class="bg-navy/50 border border-critical/30 rounded-xl overflow-hidden">
          <div class="px-4 py-2 bg-critical/10 border-b border-critical/20 flex items-center justify-between">
            <span class="text-sm font-semibold text-critical uppercase tracking-wide">What AI generates</span>
            <span class="text-xs text-critical/70">Card.tsx</span>
          </div>
          <div class="p-4 font-mono text-sm">
            <pre class="text-slate-dark"><code><span class="text-slate">const Card = () =&gt; (</span>
  <span class="text-slate">&lt;div style=&#123;&#123;</span>
    <span class="text-critical">background: "#ffffff"</span><span class="text-slate-dark">,</span>
    <span class="text-critical">padding: "16px"</span><span class="text-slate-dark">,</span>
    <span class="text-critical">borderRadius: "8px"</span><span class="text-slate-dark">,</span>
    <span class="text-critical">boxShadow: "0 2px 4px rgba..."</span>
  <span class="text-slate">&#125;&#125;&gt;</span>
    <span class="text-slate">&#123;children&#125;</span>
  <span class="text-slate">&lt;/div&gt;</span>
<span class="text-slate">)</span></code></pre>
          </div>
        </div>

        <!-- What you want -->
        <div class="bg-navy/50 border border-success/30 rounded-xl overflow-hidden">
          <div class="px-4 py-2 bg-success/10 border-b border-success/20 flex items-center justify-between">
            <span class="text-sm font-semibold text-success uppercase tracking-wide">What you want</span>
            <span class="text-xs text-success/70">Card.tsx</span>
          </div>
          <div class="p-4 font-mono text-sm">
            <pre class="text-slate-dark"><code><span class="text-slate">import &#123; Card &#125; from "@/components"</span>

<span class="text-slate">const MyCard = () =&gt; (</span>
  <span class="text-success">&lt;Card variant="elevated"&gt;</span>
    <span class="text-slate">&#123;children&#125;</span>
  <span class="text-success">&lt;/Card&gt;</span>
<span class="text-slate">)</span>


</code></pre>
          </div>
        </div>
      </div>

      <!-- What Buoy catches -->
      <div class="mt-12 max-w-3xl mx-auto">
        <div class="bg-navy/30 border border-buoy/20 rounded-xl p-6">
          <div class="text-sm font-semibold text-buoy mb-4 flex items-center gap-2">
            <span>üõü</span> What Buoy catches:
          </div>
          <div class="grid sm:grid-cols-3 gap-4 text-sm">
            <div class="flex items-start gap-2">
              <span class="text-warning mt-0.5">‚ö†</span>
              <div>
                <div class="text-light font-medium">Hardcoded colors</div>
                <div class="text-slate-dark">#ffffff ‚Üí var(--bg)</div>
              </div>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-warning mt-0.5">‚ö†</span>
              <div>
                <div class="text-light font-medium">Magic numbers</div>
                <div class="text-slate-dark">16px ‚Üí var(--space-4)</div>
              </div>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-warning mt-0.5">‚ö†</span>
              <div>
                <div class="text-light font-medium">Duplicate components</div>
                <div class="text-slate-dark">Use &lt;Card&gt; instead</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Terminal Demo Section: Find -->
  <section class="py-24 bg-navy relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-b from-navy-dark via-navy to-navy-dark"></div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl sm:text-4xl font-bold text-light mb-4">
          Find drift in seconds
        </h2>
        <p class="text-lg text-slate">
          One command. Every issue with exact file, line, and suggested fix.
        </p>
      </div>

      <Terminal
        command="buoy drift check"
        lines={terminalLines}
        class="max-w-3xl mx-auto"
      />
    </div>
  </section>

  <!-- Terminal Demo Section: Fix -->
  <section class="py-24 bg-navy-dark relative overflow-hidden">
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl sm:text-4xl font-bold text-light mb-4">
          Fix it automatically
        </h2>
        <p class="text-lg text-slate">
          One more command. Watch your design system coverage jump.
        </p>
      </div>

      <Terminal
        command="buoy fix --auto"
        lines={fixTerminalLines}
        class="max-w-3xl mx-auto"
      />

      <!-- Outcome callout -->
      <div class="mt-12 max-w-2xl mx-auto">
        <div class="bg-navy/50 border border-success/30 rounded-xl p-6 text-center">
          <div class="text-sm text-success font-semibold mb-2">THE OUTCOME</div>
          <div class="text-2xl font-bold text-light mb-2">
            47% ‚Üí 72% design system coverage
          </div>
          <p class="text-slate text-sm">
            18 issues fixed in under 5 seconds. Your team sees the improvement immediately.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Feature Grid Section -->
  <section id="features" class="py-24 bg-navy-dark">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl sm:text-4xl font-bold text-light mb-4">
          What Buoy Detects
        </h2>
        <p class="text-lg text-slate max-w-2xl mx-auto">
          Comprehensive drift detection for modern frontend codebases
        </p>
      </div>

      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {features.map((feature) => (
          <FeatureCard {...feature} />
        ))}
      </div>
    </div>
  </section>

  <!-- How It Works Section -->
  <section class="py-24 bg-navy">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl sm:text-4xl font-bold text-light mb-4">
          Find. Fix. Measure.
        </h2>
        <p class="text-lg text-slate">
          Not just detection ‚Äî action and visible results.
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-8 max-w-4xl mx-auto">
        {steps.map((step) => (
          <div class="text-center">
            <div class="w-12 h-12 rounded-full bg-buoy/20 border-2 border-buoy text-buoy font-bold flex items-center justify-center mx-auto mb-4 text-xl">
              {step.step}
            </div>
            <h3 class="text-xl font-semibold text-light mb-2">{step.title}</h3>
            <code class="text-sm text-buoy bg-navy-dark px-3 py-1 rounded-md font-mono inline-block mb-3">
              $ {step.command}
            </code>
            <p class="text-slate text-sm">{step.description}</p>
          </div>
        ))}
      </div>

      <div class="text-center mt-12">
        <Button href="/docs" variant="secondary">
          See full documentation ‚Üí
        </Button>
      </div>
    </div>
  </section>

  <!-- Integrations Section -->
  <section class="py-24 bg-navy-dark">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl sm:text-4xl font-bold text-light mb-4">
          Works with your stack
        </h2>
      </div>

      <div class="flex flex-wrap justify-center gap-4 max-w-3xl mx-auto">
        {integrations.map((integration) => (
          <div class="flex items-center gap-2 px-4 py-2 bg-navy/50 border border-navy-light/20 rounded-lg hover:border-buoy/30 transition-colors">
            <span class="text-xl">{integration.icon}</span>
            <span class="text-sm text-slate">{integration.name}</span>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-24 bg-gradient-to-b from-navy to-navy-dark relative overflow-hidden">
    <!-- Decorative elements -->
    <div class="absolute top-1/2 left-1/4 -translate-y-1/2 w-64 h-64 bg-buoy/10 rounded-full blur-3xl"></div>
    <div class="absolute top-1/2 right-1/4 -translate-y-1/2 w-64 h-64 bg-lavender/10 rounded-full blur-3xl"></div>

    <div class="relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl sm:text-4xl font-bold text-light mb-4">
        Start scanning in 30 seconds
      </h2>
      <p class="text-lg text-slate mb-8">
        Free. Open source. No signup required.
      </p>

      <div class="inline-flex flex-col sm:flex-row items-center gap-4 p-6 bg-navy/80 border border-navy-light/30 rounded-xl backdrop-blur-sm copy-command" data-command="npx buoy-design scan">
        <code class="text-lg font-mono text-light">npx buoy-design scan</code>
        <div class="flex items-center gap-3">
          <button class="copy-btn px-4 py-2 bg-navy-light/30 hover:bg-navy-light/50 text-slate hover:text-light rounded-lg transition-colors text-sm flex items-center gap-2">
            <span class="copy-text">Copy</span>
            <svg class="copy-icon w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
            </svg>
            <svg class="check-icon w-4 h-4 hidden text-success" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
          </button>
          <Button href={siteConfig.githubUrl} external>
            View on GitHub
          </Button>
        </div>
      </div>
    </div>
  </section>

  <Footer />
</Layout>

<script>
  // Copy command functionality
  document.querySelectorAll('.copy-command').forEach(container => {
    const btn = container.querySelector('.copy-btn');
    const command = container.dataset.command;

    btn?.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(command);

        // Show success state
        const copyIcon = btn.querySelector('.copy-icon');
        const checkIcon = btn.querySelector('.check-icon');
        const copyText = btn.querySelector('.copy-text');

        copyIcon?.classList.add('hidden');
        checkIcon?.classList.remove('hidden');
        if (copyText) copyText.textContent = 'Copied!';

        // Reset after 2 seconds
        setTimeout(() => {
          copyIcon?.classList.remove('hidden');
          checkIcon?.classList.add('hidden');
          if (copyText) copyText.textContent = 'Copy';
        }, 2000);
      } catch (err) {
        console.error('Failed to copy:', err);
      }
    });
  });
</script>
