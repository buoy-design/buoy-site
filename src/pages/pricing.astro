---
import Layout from '../layouts/Layout.astro'
import Nav from '../components/Nav.astro'
import Footer from '../components/Footer.astro'
import Button from '../components/Button.astro'

const plans = [
  {
    name: 'Free',
    price: '$0',
    period: 'forever',
    description: 'Open source CLI for individuals and small teams getting started.',
    features: [
      'Up to 3 users',
      'All drift detections',
      'CLI scans',
      'JSON output',
      'Community support',
    ],
    cta: 'Install Now',
    ctaHref: '/demo',
    variant: 'secondary',
  },
  {
    name: 'Pro',
    price: '$299',
    period: '/month',
    description: 'Unlimited users, one price. Everything you need to enforce your design system.',
    features: [
      'Unlimited users',
      'Historical trends',
      'Figma sync',
      'GitHub App & PR comments',
      'Web dashboard',
      'Priority support',
    ],
    cta: 'Start Free Trial',
    ctaHref: '/demo',
    variant: 'primary',
    popular: true,
  },
  {
    name: 'Enterprise',
    price: 'Custom',
    period: '',
    description: 'For organizations with advanced security and scale requirements.',
    features: [
      'Everything in Pro',
      'SSO / SAML',
      'Multi-repo dashboard',
      'Dedicated support',
      'SLA guarantees',
      'Custom integrations',
    ],
    cta: 'Contact Sales',
    ctaHref: '/contact',
    variant: 'secondary',
  },
]

const faqs = [
  {
    question: 'Is the free tier really free forever?',
    answer: 'Yes. The open source CLI will always be free under the MIT license. Teams up to 3 users can use all drift detection features at no cost.'
  },
  {
    question: 'Why flat pricing instead of per-seat?',
    answer: 'Most tools charge $20-30 per developer. We think that\'s backwards. Buoy lives in your codebase, not on individual machines. Add 5 developers or 50 â€” same $299/month. Your team grows, your bill doesn\'t.'
  },
  {
    question: 'What does historical tracking include?',
    answer: 'Track your drift metrics over time. See trends, set goals, and prove ROI to stakeholders with real data showing adoption improvements week over week.'
  },
  {
    question: 'What counts as a "codebase"?',
    answer: 'One codebase = one git repository. Monorepos count as one codebase. Multi-repo setups need the Enterprise plan or multiple Pro subscriptions.'
  },
  {
    question: 'Can I try Pro features before paying?',
    answer: 'Yes! Start a 14-day free trial with full access to all Pro features. No credit card required to start.'
  },
  {
    question: 'How does this compare to per-seat pricing?',
    answer: 'At 10 users, competitors charge $200-300/month. At 25 users, they charge $500-750/month. Buoy is $299/month regardless of team size. You break even at ~12 users and save more as you grow.'
  },
]
---

<Layout
  title="Pricing | Buoy - Design Drift Detection"
  description="Free forever open source CLI with unlimited developers. Upgrade to Pro for history, MCP server, and advanced tools."
  keywords="buoy pricing, design drift tool pricing, design system tool cost"
>
  <Nav />

  <!-- Hero -->
  <section class="relative pt-32 pb-16 overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-b from-navy-dark via-navy to-navy-dark"></div>

    <div class="relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-4xl sm:text-5xl font-bold text-light mb-6">
        Free for everyone. Pro for serious teams.
      </h1>
      <p class="text-lg text-slate max-w-2xl mx-auto">
        No per-seat pricing. Buoy lives in your codebase â€” your whole team uses it for free.
        Pay only for advanced features when you need them.
      </p>
    </div>
  </section>

  <!-- No Per-Seat Callout -->
  <section class="py-8 bg-navy">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="bg-navy-dark border border-buoy/30 rounded-xl p-6 flex items-center gap-4">
        <div class="text-4xl">ðŸŽ‰</div>
        <div>
          <h3 class="font-semibold text-light mb-1">No per-developer pricing</h3>
          <p class="text-sm text-slate">
            Add 5 developers or 500 â€” same price. Buoy is a codebase tool, not a per-seat subscription.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Pricing Cards -->
  <section class="py-16 bg-navy-dark">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-3 gap-8">
        {plans.map((plan) => (
          <div class={`relative bg-navy/50 border rounded-2xl p-8 ${plan.popular ? 'border-buoy' : 'border-navy-light/20'}`}>
            {plan.popular && (
              <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-buoy text-navy-dark text-xs font-semibold rounded-full">
                Most Popular
              </div>
            )}

            <div class="text-center mb-6">
              <h3 class="text-xl font-bold text-light mb-2">{plan.name}</h3>
              <div class="flex items-baseline justify-center gap-1">
                <span class="text-4xl font-bold text-light">{plan.price}</span>
                {plan.period && <span class="text-slate text-sm">{plan.period}</span>}
              </div>
              <p class="text-sm text-slate mt-2">{plan.description}</p>
            </div>

            <ul class="space-y-3 mb-8">
              {plan.features.map((feature) => (
                <li class="flex items-start gap-2 text-sm text-slate">
                  <svg class="w-5 h-5 text-success flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                  </svg>
                  {feature}
                </li>
              ))}
            </ul>

            <Button
              href={plan.ctaHref}
              variant={plan.variant as 'primary' | 'secondary'}
              class="w-full justify-center"
            >
              {plan.cta}
            </Button>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Feature Comparison -->
  <section class="py-16 bg-navy">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">Feature Comparison</h2>

      <div class="bg-navy-dark border border-navy-light/30 rounded-xl overflow-hidden">
        <div class="grid grid-cols-4 bg-navy border-b border-navy-light/20 text-sm">
          <div class="p-4 font-semibold text-slate">Feature</div>
          <div class="p-4 font-semibold text-slate text-center border-l border-navy-light/20">Free</div>
          <div class="p-4 font-semibold text-buoy text-center border-l border-navy-light/20">Pro</div>
          <div class="p-4 font-semibold text-slate text-center border-l border-navy-light/20">Enterprise</div>
        </div>

        {[
          { feature: 'Drift Detection', free: true, pro: true, ent: true },
          { feature: 'CLI Scans', free: true, pro: true, ent: true },
          { feature: 'JSON Output', free: true, pro: true, ent: true },
          { feature: 'Users', free: 'Up to 3', pro: 'Unlimited', ent: 'Unlimited' },
          { feature: 'Historical Trends', free: false, pro: true, ent: true },
          { feature: 'Web Dashboard', free: false, pro: true, ent: true },
          { feature: 'GitHub App', free: false, pro: true, ent: true },
          { feature: 'Figma Sync', free: false, pro: true, ent: true },
          { feature: 'PR Comments', free: false, pro: true, ent: true },
          { feature: 'Multi-Repo Dashboard', free: false, pro: false, ent: true },
          { feature: 'SSO / SAML', free: false, pro: false, ent: true },
          { feature: 'SLA', free: false, pro: false, ent: true },
        ].map((row, index) => (
          <div class={`grid grid-cols-4 text-sm ${index % 2 === 0 ? 'bg-navy/30' : ''}`}>
            <div class="p-4 text-light">{row.feature}</div>
            <div class="p-4 text-center border-l border-navy-light/20">
              {typeof row.free === 'string' ? <span class="text-slate">{row.free}</span> : row.free ? <span class="text-success">âœ“</span> : <span class="text-slate-dark">â€”</span>}
            </div>
            <div class="p-4 text-center border-l border-navy-light/20">
              {typeof row.pro === 'string' ? <span class="text-success">{row.pro}</span> : row.pro ? <span class="text-success">âœ“</span> : <span class="text-slate-dark">â€”</span>}
            </div>
            <div class="p-4 text-center border-l border-navy-light/20">
              {typeof row.ent === 'string' ? <span class="text-success">{row.ent}</span> : row.ent ? <span class="text-success">âœ“</span> : <span class="text-slate-dark">â€”</span>}
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section class="py-16 bg-navy-dark">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">Frequently Asked Questions</h2>

      <div class="space-y-4">
        {faqs.map((faq) => (
          <details class="group bg-navy/50 border border-navy-light/20 rounded-xl">
            <summary class="flex items-center justify-between p-4 cursor-pointer list-none">
              <span class="font-medium text-light">{faq.question}</span>
              <svg class="w-5 h-5 text-slate group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </summary>
            <div class="px-4 pb-4 text-slate">
              {faq.answer}
            </div>
          </details>
        ))}
      </div>
    </div>
  </section>

  <Footer />
</Layout>
