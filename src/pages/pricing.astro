---
import Layout from '../layouts/Layout.astro'
import Nav from '../components/Nav.astro'
import Footer from '../components/Footer.astro'
import Button from '../components/Button.astro'
import LeadMagnetCallout from '../components/LeadMagnetCallout.astro'

const plans = [
  {
    name: 'Free',
    price: '$0',
    period: 'forever',
    description: 'Open source CLI with full drift detection. No limits.',
    features: [
      'Auto-detects design system',
      'All drift detection commands',
      'Import tokens (JSON, CSS, Tokens Studio)',
      'AI guardrails (skills, MCP, context)',
      'Local scan history',
      'Community support',
    ],
    cta: 'Install Now',
    ctaHref: '/docs/quickstart',
    variant: 'secondary',
  },
  {
    name: 'Team',
    price: '$25',
    period: '/dev/month',
    description: 'Cloud features for teams. $20/dev billed annually.',
    features: [
      'Everything in Free',
      'Unlimited repos',
      'GitHub PR comments',
      'Slack & Teams alerts',
      'Cloud history & trends',
      'Figma Monitor plugin',
      'No minimum seats',
    ],
    cta: 'Start Free Trial',
    ctaHref: '/signup',
    variant: 'primary',
    popular: true,
  },
  {
    name: 'Enterprise',
    price: 'Custom',
    period: '',
    description: 'For organizations needing security, compliance, and hands-on support.',
    features: [
      'Everything in Team',
      'SSO / SAML',
      'Audit logs',
      'SLA guarantees',
      'Design system implementation consulting',
      'Dedicated Slack channel',
      'Custom integrations',
    ],
    cta: 'Contact Sales',
    ctaHref: '/contact',
    variant: 'secondary',
  },
]

const faqs = [
  {
    question: 'Is the free tier really free forever?',
    answer: 'Yes. The open source CLI will always be free under the MIT license. Full drift detection, AI guardrails, token import â€” all free with no user limits.'
  },
  {
    question: 'What\'s included in the free CLI?',
    answer: 'Everything you need to detect and fix design drift: auto-detection of your design system, all scanning commands, AI guardrails (skills, MCP server, CLAUDE.md context), and local scan history. The CLI is the full product, not a teaser.'
  },
  {
    question: 'Why per-seat pricing?',
    answer: 'We align with industry standards like CodeRabbit and Greptile. At $25/dev ($20 annual), you get cloud features that scale with your team. Solo devs pay $25/mo, not $299/mo.'
  },
  {
    question: 'Is there a minimum number of seats?',
    answer: 'No minimum. A solo developer can use the Team plan for $25/month. Pay for exactly what you need.'
  },
  {
    question: 'Do you offer discounts for annual billing?',
    answer: 'Yes â€” 20% off. Annual billing is $20/dev/month ($240/dev/year) instead of $25/dev/month.'
  },
  {
    question: 'What about open source projects?',
    answer: 'Verified open source projects get full Team plan features for free. Apply through our OSS program.'
  },
  {
    question: 'What\'s the Figma Monitor plugin?',
    answer: 'A Figma plugin that shows live design system health inside your Figma files. See which components are drifting, which tokens are being used correctly â€” all without leaving Figma.'
  },
  {
    question: 'What does Enterprise consulting include?',
    answer: 'Hands-on help establishing your design system: defining tokens, documenting patterns, setting up governance, training your team. We help you build it, not just detect drift in it.'
  },
]
---

<Layout
  title="Pricing | Buoy - Design Drift Detection"
  description="Free forever open source CLI with unlimited developers. Upgrade to Pro for history, MCP server, and advanced tools."
  keywords="buoy pricing, design drift tool pricing, design system tool cost"
>
  <Nav />

  <!-- Hero -->
  <section class="relative pt-32 pb-16 overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-b from-navy-dark via-navy to-navy-dark"></div>

    <div class="relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-4xl sm:text-5xl font-bold text-light mb-6">
        Free CLI. Simple per-seat pricing.
      </h1>
      <p class="text-lg text-slate max-w-2xl mx-auto">
        Full drift detection is free forever. Cloud features start at $25/dev/month.
        Open source projects get everything free.
      </p>
    </div>
  </section>

  <!-- OSS Callout -->
  <section class="py-8 bg-navy">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="bg-navy-dark border border-buoy/30 rounded-xl p-6 flex items-center gap-4">
        <div class="text-4xl">ðŸ’š</div>
        <div>
          <h3 class="font-semibold text-light mb-1">Free for open source</h3>
          <p class="text-sm text-slate">
            Verified open source projects get full Team plan features at no cost. Building in public? We've got you.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Pricing Cards -->
  <section class="py-16 bg-navy-dark">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-3 gap-8">
        {plans.map((plan) => (
          <div class={`relative bg-navy/50 border rounded-2xl p-8 ${plan.popular ? 'border-buoy' : 'border-navy-light/20'}`}>
            {plan.popular && (
              <div class="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-buoy text-navy-dark text-xs font-semibold rounded-full">
                Most Popular
              </div>
            )}

            <div class="text-center mb-6">
              <h3 class="text-xl font-bold text-light mb-2">{plan.name}</h3>
              <div class="flex items-baseline justify-center gap-1">
                <span class="text-4xl font-bold text-light">{plan.price}</span>
                {plan.period && <span class="text-slate text-sm">{plan.period}</span>}
              </div>
              <p class="text-sm text-slate mt-2">{plan.description}</p>
            </div>

            <ul class="space-y-3 mb-8">
              {plan.features.map((feature) => (
                <li class="flex items-start gap-2 text-sm text-slate">
                  <svg class="w-5 h-5 text-success flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                  </svg>
                  {feature}
                </li>
              ))}
            </ul>

            <Button
              href={plan.ctaHref}
              variant={plan.variant as 'primary' | 'secondary'}
              class="w-full justify-center"
            >
              {plan.cta}
            </Button>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Lead Magnet: Maturity Model -->
  <section class="py-12 bg-navy-dark">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <LeadMagnetCallout
        leadMagnet="maturity-model"
        headline="Not sure which tier fits your team?"
        subhead="Use our Design System Maturity Model to assess where you are and what you need. Free self-assessment PDF."
        buttonText="Get the Assessment"
      />
    </div>
  </section>

  <!-- Feature Comparison -->
  <section class="py-16 bg-navy">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">Feature Comparison</h2>

      <div class="bg-navy-dark border border-navy-light/30 rounded-xl overflow-hidden">
        <div class="grid grid-cols-4 bg-navy border-b border-navy-light/20 text-sm">
          <div class="p-4 font-semibold text-slate">Feature</div>
          <div class="p-4 font-semibold text-slate text-center border-l border-navy-light/20">Free</div>
          <div class="p-4 font-semibold text-buoy text-center border-l border-navy-light/20">Team</div>
          <div class="p-4 font-semibold text-slate text-center border-l border-navy-light/20">Enterprise</div>
        </div>

        {[
          { feature: 'Auto-detect design system', free: true, team: true, ent: true },
          { feature: 'All drift detection', free: true, team: true, ent: true },
          { feature: 'Token import (JSON, CSS)', free: true, team: true, ent: true },
          { feature: 'AI guardrails (MCP, skills)', free: true, team: true, ent: true },
          { feature: 'Local scan history', free: true, team: true, ent: true },
          { feature: 'Unlimited repos', free: false, team: true, ent: true },
          { feature: 'GitHub PR comments', free: false, team: true, ent: true },
          { feature: 'Slack & Teams alerts', free: false, team: true, ent: true },
          { feature: 'Cloud history & trends', free: false, team: true, ent: true },
          { feature: 'Figma Monitor plugin', free: false, team: true, ent: true },
          { feature: 'SSO / SAML', free: false, team: false, ent: true },
          { feature: 'Audit logs', free: false, team: false, ent: true },
          { feature: 'SLA guarantees', free: false, team: false, ent: true },
          { feature: 'Implementation consulting', free: false, team: false, ent: true },
        ].map((row, index) => (
          <div class={`grid grid-cols-4 text-sm ${index % 2 === 0 ? 'bg-navy/30' : ''}`}>
            <div class="p-4 text-light">{row.feature}</div>
            <div class="p-4 text-center border-l border-navy-light/20">
              {typeof row.free === 'string' ? <span class="text-slate">{row.free}</span> : row.free ? <span class="text-success">âœ“</span> : <span class="text-slate-dark">â€”</span>}
            </div>
            <div class="p-4 text-center border-l border-navy-light/20">
              {typeof row.team === 'string' ? <span class="text-success">{row.team}</span> : row.team ? <span class="text-success">âœ“</span> : <span class="text-slate-dark">â€”</span>}
            </div>
            <div class="p-4 text-center border-l border-navy-light/20">
              {typeof row.ent === 'string' ? <span class="text-success">{row.ent}</span> : row.ent ? <span class="text-success">âœ“</span> : <span class="text-slate-dark">â€”</span>}
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section class="py-16 bg-navy-dark">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">Frequently Asked Questions</h2>

      <div class="space-y-4">
        {faqs.map((faq) => (
          <details class="group bg-navy/50 border border-navy-light/20 rounded-xl">
            <summary class="flex items-center justify-between p-4 cursor-pointer list-none">
              <span class="font-medium text-light">{faq.question}</span>
              <svg class="w-5 h-5 text-slate group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </summary>
            <div class="px-4 pb-4 text-slate">
              {faq.answer}
            </div>
          </details>
        ))}
      </div>
    </div>
  </section>

  <Footer />
</Layout>
