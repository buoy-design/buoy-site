---
import FeatureLayout from '../../layouts/FeatureLayout.astro'
import Terminal from '../../components/Terminal.astro'
import FeatureCard from '../../components/FeatureCard.astro'

const terminalLines = [
  { text: '', delay: 600 },
  { text: '<span class="text-light font-semibold">Design System Coverage</span>', type: 'output', delay: 800 },
  { text: '═══════════════════════════════════════', type: 'muted', delay: 1000 },
  { text: '', delay: 1200 },
  { text: 'Components: <span class="text-warning">47%</span> ████████░░░░░░░░░░', type: 'output', delay: 1400 },
  { text: 'Tokens:     <span class="text-success">63%</span> ████████████░░░░░░', type: 'output', delay: 1600 },
  { text: 'Overall:    <span class="text-warning">52%</span> ██████████░░░░░░░░', type: 'output', delay: 1800 },
  { text: '', delay: 2000 },
  { text: '<span class="text-slate">By Source:</span>', type: 'output', delay: 2200 },
  { text: '├─ src/components/    <span class="text-success">78%</span> ███████████████░', type: 'output', delay: 2400 },
  { text: '├─ src/features/      <span class="text-warning">34%</span> ██████░░░░░░░░░', type: 'output', delay: 2600 },
  { text: '└─ src/pages/         <span class="text-critical">23%</span> ████░░░░░░░░░░░', type: 'output', delay: 2800 },
  { text: '', delay: 3000 },
  { text: '<span class="text-slate">Component Usage:</span>', type: 'output', delay: 3200 },
  { text: '├─ Button           <span class="text-success">156 uses</span>', type: 'output', delay: 3400 },
  { text: '├─ Card             <span class="text-success">89 uses</span>', type: 'output', delay: 3600 },
  { text: '└─ Input            <span class="text-warning">12 uses</span>', type: 'output', delay: 3800 },
]

const metrics = [
  {
    title: 'Component Coverage',
    description: 'Percentage of components using design system primitives vs custom implementations'
  },
  {
    title: 'Token Adoption',
    description: 'Percentage of style values using design tokens vs hardcoded values'
  },
  {
    title: 'Per-Directory Breakdown',
    description: 'See which parts of your codebase are adopting fastest (and slowest)'
  },
  {
    title: 'Component Usage',
    description: 'Track which design system components are used most, and which are ignored'
  },
  {
    title: 'Trend Tracking',
    description: 'See adoption improve over time with historical charts (Pro feature)'
  },
  {
    title: 'Team Attribution',
    description: 'Track adoption by team or code owner for targeted improvement'
  },
]

const relatedFeatures = [
  {
    title: 'CI Integration',
    description: 'Enforce coverage thresholds in your CI pipeline',
    href: '/features/ci'
  },
  {
    title: 'GitHub Action',
    description: 'Get coverage reports on every PR',
    href: '/features/github-action'
  },
  {
    title: 'Drift Detection',
    description: 'Find what\'s causing low coverage',
    href: '/features/drift-detection'
  },
]
---

<FeatureLayout
  title="Design System Adoption Metrics & Coverage | Buoy"
  description="Measure design system adoption with real data. See which teams use components, token coverage, and adoption trends over time."
  keywords="design system adoption metrics, component usage tracking, design system ROI"
  heroTitle="Measure adoption with real data"
  heroDescription={`"We think we have 60% adoption" isn't good enough. Buoy gives you the actual numbers.`}
>
  <!-- Metrics Overview -->
  <section class="py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">What You'll Measure</h2>

      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {metrics.map((metric) => (
          <div class="bg-navy/50 border border-navy-light/20 rounded-xl p-6">
            <h3 class="font-semibold text-light mb-2">{metric.title}</h3>
            <p class="text-sm text-slate">{metric.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Terminal Demo -->
  <section class="py-16 bg-navy">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">See it in action</h2>
      <Terminal command="buoy audit" lines={terminalLines} />
    </div>
  </section>

  <!-- Why Coverage Matters -->
  <section class="py-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">Why Coverage Matters</h2>

      <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-navy/50 border border-navy-light/20 rounded-xl p-6">
          <h3 class="font-semibold text-light mb-4">Without Metrics</h3>
          <ul class="space-y-2 text-sm text-slate">
            <li class="flex items-start gap-2">
              <span class="text-critical">✗</span>
              <span>"We think adoption is around 60%"</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-critical">✗</span>
              <span>No way to prove ROI of design system</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-critical">✗</span>
              <span>Can't identify which teams need help</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-critical">✗</span>
              <span>Don't know if things are improving</span>
            </li>
          </ul>
        </div>

        <div class="bg-navy/50 border border-success/30 rounded-xl p-6">
          <h3 class="font-semibold text-light mb-4">With Buoy</h3>
          <ul class="space-y-2 text-sm text-slate">
            <li class="flex items-start gap-2">
              <span class="text-success">✓</span>
              <span>"We have 47% component coverage, 63% token adoption"</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-success">✓</span>
              <span>Show leadership exactly where you stand</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-success">✓</span>
              <span>See src/pages/ is at 23% — focus there</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-success">✓</span>
              <span>Track improvement: +8% this month</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Related Features -->
  <div slot="related" class="grid sm:grid-cols-3 gap-6 max-w-4xl mx-auto">
    {relatedFeatures.map((feature) => (
      <FeatureCard
        title={feature.title}
        description={feature.description}
        href={feature.href}
      />
    ))}
  </div>
</FeatureLayout>
